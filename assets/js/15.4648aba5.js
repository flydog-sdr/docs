(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{377:function(e,t,i){"use strict";i.r(t);var a=i(18),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("h1",{attrs:{id:"generate-fpga-bitstreams"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#generate-fpga-bitstreams"}},[e._v("#")]),e._v(" Generate FPGA Bitstreams")]),e._v(" "),i("p",[e._v("FlyDog SDR uses an FPGA to process the data sampled by the ADC, so the associated FPGA bitstream file (.bit) needs to be built.")]),e._v(" "),i("h2",{attrs:{id:"build-the-development-environment"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#build-the-development-environment"}},[e._v("#")]),e._v(" Build the Development Environment")]),e._v(" "),i("p",[e._v("FlyDog SDR uses Vivado 2019.2 for FPGA development.")]),e._v(" "),i("h3",{attrs:{id:"system-requirements"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#system-requirements"}},[e._v("#")]),e._v(" System Requirements")]),e._v(" "),i("p",[e._v("Vivado 2019.2 supports the following versions of operating systems and distributions (x86-64 based processor architectures only)")]),e._v(" "),i("ul",[i("li",[e._v("Microsoft Windows 7 SP1 Professional")]),e._v(" "),i("li",[e._v("Microsoft Windows 10 (Update 1803; 1903)")]),e._v(" "),i("li",[e._v("Red Hat Enterprise Linux (Workstation, Server 7.4; 7.5; 7.6)")]),e._v(" "),i("li",[e._v("SUSE Linux Enterprise 12.4")]),e._v(" "),i("li",[e._v("CentOS 7")]),e._v(" "),i("li",[e._v("Ubuntu Linux (16.04.5; 16.04.6; 18.04.1; 18.04.02)")]),e._v(" "),i("li",[e._v("Amazon Linux 2 LTS")])]),e._v(" "),i("p",[e._v("Vivado 2019.2 will take up approximately 31 GB of disk space after installation.")]),e._v(" "),i("p",[e._v("For Vivado 2019.2 release notes, see "),i("a",{attrs:{href:"https://www.xilinx.com/support/documentation/sw_manuals/xilinx2019_2/ug973-vivado-release-notes-install-license.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("ug973-vivado-release-notes-install-license.pdf"),i("OutboundLink")],1),e._v(".")]),e._v(" "),i("h3",{attrs:{id:"get-vivado"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#get-vivado"}},[e._v("#")]),e._v(" Get Vivado")]),e._v(" "),i("p",[e._v("To download Vivado 2019.2, developers will need to "),i("a",{attrs:{href:"https://www.xilinx.com/registration/create-account.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("create a Xilinx account"),i("OutboundLink")],1),e._v(".")]),e._v(" "),i("p",[e._v("After logging in to your account, go to the "),i("a",{attrs:{href:"https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/vivado-design-tools/2019-2.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vivado 2019.2 download page"),i("OutboundLink")],1),e._v(", select "),i("strong",[e._v("Vivado HLx 2019.2: All OS installer Single-File Download")]),e._v(" and fill in the relevant form to obtain the file download link.")]),e._v(" "),i("p",[e._v("The file size of Vivado 2019.2 is 26.55 GB and you will need to have a good internet connection to download it.")]),e._v(" "),i("h3",{attrs:{id:"installing-vivado"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#installing-vivado"}},[e._v("#")]),e._v(" Installing Vivado")]),e._v(" "),i("p",[e._v("After unzipping "),i("code",[e._v("Xilinx_Vivado_2019.2_1106_2127.tar.gz")]),e._v(", execute "),i("code",[e._v("xsetup.exe")]),e._v(" as administrator on Windows and xsetup in privileged mode (sudo) on Linux.")]),e._v(" "),i("p",[e._v("During the installation process, choose to install ISE WebPACK Design Software.")]),e._v(" "),i("p",[e._v("Once the installation is complete, the user can set the relevant environment variables to ensure that Vivado-related commands can be executed in the terminal (optional setting).")]),e._v(" "),i("p",[e._v("For Windows systems, add "),i("code",[e._v("Vivado installation path/bin")]),e._v(" to the "),i("code",[e._v("PATH")]),e._v(" in the Advanced System Settings.")]),e._v(" "),i("p",[e._v("For Linux systems, add "),i("code",[e._v("export PATH=/opt/Xilinx/Vivado/2019.2/bin:$PATH")]),e._v(" to the current user's "),i("code",[e._v(".bashrc")]),e._v(" file.")]),e._v(" "),i("h2",{attrs:{id:"create-a-vivado-project"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#create-a-vivado-project"}},[e._v("#")]),e._v(" Create a Vivado Project")]),e._v(" "),i("h3",{attrs:{id:"source-and-ip-cores"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#source-and-ip-cores"}},[e._v("#")]),e._v(" Source and IP Cores")]),e._v(" "),i("p",[e._v("Use Git to get the "),i("code",[e._v("FlyDog_SDR_GPS")]),e._v(" core source code.")]),e._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("[fdsdr@flydog-sdr-project ~]$ git clone https://github.com/flydog-sdr/FlyDog_SDR_GPS.git\n")])])]),i("p",[e._v("For mainland China, it's recommend to pull using the GitHub mirror (github.com.cnpmjs.org).")]),e._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("[fdsdr@flydog-sdr-project ~]$ git clone https://github.com.cnpmjs.org/flydog-sdr/FlyDog_SDR_GPS.git\n")])])]),i("p",[e._v("Create a new empty directory called "),i("code",[e._v("project")]),e._v(" and create a new subdirectory "),i("code",[e._v("flydog")]),e._v(" in this empty directory.")]),e._v(" "),i("p",[e._v("Then create two new directories "),i("code",[e._v("import_src")]),e._v(" and "),i("code",[e._v("import_ip")]),e._v(" in the "),i("code",[e._v("flydog")]),e._v(" directory, with the following directory tree structure.")]),e._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("[fdsdr@flydog-sdr-project ~]$ tree -d project\nproject\n└── flydog\n    ├── import_ip\n    └── import_src\n\n3 directories\n")])])]),i("p",[e._v("Copy everything under "),i("code",[e._v("FlyDog_SDR_GPS/verilog")]),e._v(" to "),i("code",[e._v("project/flydog/import_src")]),e._v(" and everything under "),i("code",[e._v("FlyDog_SDR_GPS/verilog.Vivado.2019.2.ip")]),e._v(" to "),i("code",[e._v("project/flydog/import_ip")]),e._v(".")]),e._v(" "),i("p",[i("code",[e._v("import_src")]),e._v(" contains the FPGA related project files and "),i("code",[e._v("flydog/import_ip")]),e._v(" contains the related IP cores.")]),e._v(" "),i("h3",{attrs:{id:"create-a-project-and-import-the-source-and-ip-cores"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#create-a-project-and-import-the-source-and-ip-cores"}},[e._v("#")]),e._v(" Create a Project and Import the Source and IP Cores")]),e._v(" "),i("p",[e._v("Start Vivado 2019.2 and select Create Project under Quick Start on the home page to create a new project.")]),e._v(" "),i("ol",[i("li",[e._v("In the wizard that appears, fill in the project name (flydog) and select the path to the "),i("code",[e._v("project")]),e._v(" directory.\n"),i("img",{attrs:{src:"/developer/fpga_1.png",alt:"Project Name",title:"Project Name"}})]),e._v(" "),i("li",[e._v("Select RTL Project for Project Type and leave Do not specify source at this time unchecked.")]),e._v(" "),i("li",[e._v("Click Add Directories and select "),i("code",[e._v("project/flydog/import_src")]),e._v(". Check Scan and add RTL include files into project and Add sources from sub directories, uncheck Copy sources into project.\n"),i("img",{attrs:{src:"/developer/fpga_2.png",alt:"Add Sources",title:"Add Sources"}})]),e._v(" "),i("li",[e._v("Click Add Files on the Add Constraints page, select "),i("code",[e._v("KiwiSDR.xdc")]),e._v(" and leave Copy constraints files into project unchecked.\n"),i("img",{attrs:{src:"/developer/fpga_3.png",alt:"Add Constraints",title:"Add Constraints"}})]),e._v(" "),i("li",[e._v("Select the hardware in the Default Part page. Type "),i("code",[e._v("xc7a35tftg256-1")]),e._v(" in the search box and check the listed hardware.\n"),i("img",{attrs:{src:"/developer/fpga_4.png",alt:"Default Part",title:"Default Part"}})])]),e._v(" "),i("p",[e._v("Once the project has been created, click Add Sources in the left menu of the Vivado 2019.2 main screen to add the IP cores.")]),e._v(" "),i("ol",[i("li",[e._v("Select Add or create design sources in the wizard that appears.")]),e._v(" "),i("li",[e._v("In the Add or Create Design Sources page that appears, click Add Directories and select "),i("code",[e._v("project/flydog/import_ip")]),e._v(". Check Copy sources into project and Add sources from subdirectories, uncheck Scan and add RTL include files into project.\n"),i("img",{attrs:{src:"/developer/fpga_5.png",alt:"Add or Create Design Sources",title:"Add or Create Design Sources"}})]),e._v(" "),i("li",[e._v("Click Finish to complete the import of the IP cores.")])]),e._v(" "),i("p",[e._v("The critical warning that appears during IP core import is safe and can be ignored.")]),e._v(" "),i("h2",{attrs:{id:"generate-fpga-bitstream"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#generate-fpga-bitstream"}},[e._v("#")]),e._v(" Generate FPGA Bitstream")]),e._v(" "),i("p",[e._v("In the Sources window, expand the Verilog Header entry and double click on "),i("code",[e._v("kiwi.gen.vh")]),e._v(" to edit it.")]),e._v(" "),i("p",[i("code",[e._v("kiwi.gen.vh")]),e._v(" will specify that Vivado 2019.2 generates different FPGA bitstream files, corresponding to the 4 FPGA modes of the FlyDog SDR.")]),e._v(" "),i("h3",{attrs:{id:"kiwisdr-rx4-wf4-bit"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#kiwisdr-rx4-wf4-bit"}},[e._v("#")]),e._v(" KiwiSDR.rx4.wf4.bit")]),e._v(" "),i("p",[e._v("By default, the configuration in "),i("code",[e._v("kiwi.gen.vh")]),e._v(" is 4 users (rx4) 4 waterfalls (wf4).")]),e._v(" "),i("p",[e._v("Click Generate Bitstream in the left menu of the Vivado 2019.2 main interface, Vivado 2019.2 will then synthesize the IP cores and, once the synthesis is complete, start generating the FPGA bitstream.")]),e._v(" "),i("p",[e._v("The time used for this process varies depending on the configuration of the computer.")]),e._v(" "),i("p",[e._v("During synthesis, a Synthesis out-of-date warning will appear and can be ignored.")]),e._v(" "),i("p",[e._v("The path to the generated FPGA bitstream file is "),i("code",[e._v("project/flydog/flydog.runs/impl_1/KiwiSDR.bit")]),e._v(". Rename the file to "),i("code",[e._v("KiwiSDR.rx4.wf4.bit")]),e._v(" and move it to another directory.")]),e._v(" "),i("p",[e._v("Close Vivado 2019.2 directly and reopen the project via "),i("code",[e._v("project/flydog/flydog.xpr")]),e._v(" to avoid a Synthesis out-of-date error in Vivado 2019.2 that will cause the IP to be synthesized again when generating other mode FPGA bitstreams next time.")]),e._v(" "),i("h3",{attrs:{id:"kiwisdr-rx3-wf3-bit"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#kiwisdr-rx3-wf3-bit"}},[e._v("#")]),e._v(" kiwiSDR.rx3.wf3.bit")]),e._v(" "),i("p",[e._v("Change the "),i("code",[e._v("RX_CFG")]),e._v(" string in the "),i("code",[e._v("kiwi.gen.vh")]),e._v(" file to "),i("code",[e._v("3")]),e._v(".")]),e._v(" "),i("p",[e._v("The code is as follows.")]),e._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("parameter RX_CFG = 4;\n``define USE_WF\n")])])]),i("p",[e._v("Then click Generate Bitstream in the left menu of the Vivado 2019.2 main screen.")]),e._v(" "),i("p",[e._v("The path to the generated FPGA bitstream file is "),i("code",[e._v("project/flydog/flydog.runs/impl_1/KiwiSDR.bit")]),e._v(". Rename the file to "),i("code",[e._v("KiwiSDR.rx3.wf3.bit")]),e._v(" and move it to another directory.")]),e._v(" "),i("h3",{attrs:{id:"kiwisdr-rx8-wf2-bit"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#kiwisdr-rx8-wf2-bit"}},[e._v("#")]),e._v(" KiwiSDR.rx8.wf2.bit")]),e._v(" "),i("p",[e._v("The operation is roughly the same as generating KiwiSDR.rx3.wf3.bit, but the "),i("code",[e._v("kiwi.gen.vh")]),e._v(" file has a corresponding value of "),i("code",[e._v("8")]),e._v(" for the "),i("code",[e._v("RX_CFG")]),e._v(" field.")]),e._v(" "),i("p",[e._v("The code is as follows.")]),e._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("parameter RX_CFG = 8;\n``define USE_WF\n")])])]),i("p",[e._v("The path to the generated FPGA bitstream file is "),i("code",[e._v("project/flydog/flydog.runs/impl_1/KiwiSDR.bit")]),e._v(". Rename the file to "),i("code",[e._v("KiwiSDR.rx8.wf2.bit")]),e._v(" and move it to another directory.")]),e._v(" "),i("h3",{attrs:{id:"kiwisdr-rx14-wf0-bit"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#kiwisdr-rx14-wf0-bit"}},[e._v("#")]),e._v(" KiwiSDR.rx14.wf0.bit")]),e._v(" "),i("p",[e._v("The operation is much the same as generating KiwiSDR.rx3.wf3.bit, except that the "),i("code",[e._v("RX_CFG")]),e._v(" field in the "),i("code",[e._v("kiwi.gen.vh")]),e._v(" file has a corresponding value of "),i("code",[e._v("14")]),e._v(" and the "),i("code",[e._v("define USE_WF")]),e._v(" field needs to be removed or commented out.")]),e._v(" "),i("p",[e._v("The code is as follows.")]),e._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("parameter RX_CFG = 14;\n//``define USE_WF\n")])])]),i("p",[e._v("The path to the generated FPGA bitstream file is "),i("code",[e._v("project/flydog/flydog.runs/impl_1/KiwiSDR.bit")]),e._v(". Rename the file to "),i("code",[e._v("KiwiSDR.rx14.wf0.bit")]),e._v(" and then move it to another directory.")])])}),[],!1,null,null,null);t.default=r.exports}}]);
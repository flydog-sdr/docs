(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{376:function(e,t,r){"use strict";r.r(t);var a=r(18),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"build-a-docker-image"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#build-a-docker-image"}},[e._v("#")]),e._v(" Build a Docker Image")]),e._v(" "),r("p",[e._v("FlyDog SDR runs in Docker, so you need to build a Docker image.")]),e._v(" "),r("h2",{attrs:{id:"build-the-development-environment"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#build-the-development-environment"}},[e._v("#")]),e._v(" Build the Development Environment")]),e._v(" "),r("p",[e._v("To build a Docker image for FlyDog SDR, you will need to operate in an "),r("code",[e._v("armv7l")]),e._v(" architecture or use Docker Buildx for cross-platform builds (not recommended and currently requires Docker experimental features to be enabled).")]),e._v(" "),r("h3",{attrs:{id:"installing-docker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#installing-docker"}},[e._v("#")]),e._v(" Installing Docker")]),e._v(" "),r("p",[e._v("The processor architecture is checked and the architecture needs to be "),r("code",[e._v("armv7l")]),e._v(".")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[fdsdr@flydog-sdr-project: ~]$ uname -m\narmv7l\n")])])]),r("p",[e._v("Automate the installation using Docker-related installation scripts.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[fdsdr@flydog-sdr-project ~]$ sudo curl -o /tmp/get-docker.sh https://get.docker.com\n[fdsdr@flydog-sdr-project ~]$ sudo chmod +x /tmp/get-docker.sh\n[fdsdr@flydog-sdr-project ~]$ sudo sh -c /tmp/get-docker.sh\n")])])]),r("p",[e._v("For mainland China, you can add the "),r("code",[e._v("-mirror Aliyun")]),e._v(" parameter when installing Docker, and use the Aliyun image for installation.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[fdsdr@flydog-sdr-project ~]$ sudo sh -c /tmp/get-docker.sh --mirror Aliyun\n")])])]),r("p",[e._v("Once the installation is complete, add the current user to the Docker usergroup "),r("code",[e._v("docker")]),e._v(" and reboot.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[fdsdr@flydog-sdr-project ~]$ sudo usermod -aG docker ${USER}\n[fdsdr@flydog-sdr-project ~]$ sudo systemctl enable docker\n[fdsdr@flydog-sdr-project ~]$ sudo reboot\n")])])]),r("h3",{attrs:{id:"pulling-base-images"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#pulling-base-images"}},[e._v("#")]),e._v(" Pulling Base Images")]),e._v(" "),r("p",[e._v("FlyDog SDR is built using Bebian Buster as the base image.")]),e._v(" "),r("p",[e._v("Pull "),r("code",[e._v("debian:buster-slim")]),e._v(" from DockerHub.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[fdsdr@flydog-sdr-project ~]$ docker pull debian:buster-slim\n")])])]),r("p",[e._v("For mainland China, you can use Aliyun's Docker image accelerator when pulling base images.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[fdsdr@flydog-sdr-project ~]$ docker pull flydog-sdr.mirror.aliyuncs.com/library/debian:buster-slim\n[fdsdr@flydog-sdr-project ~]$ docker tag flydog-sdr.mirror.aliyuncs.com/library/debian:cluster-slim debian:cluster-slim\n[fdsdr@flydog-sdr-project ~]$ docker image rm flydog-sdr.mirror.aliyuncs.com/library/debian:cluster-slim\n")])])]),r("h2",{attrs:{id:"build"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#build"}},[e._v("#")]),e._v(" Build")]),e._v(" "),r("p",[e._v("Use Git to get the Dockerfile for FlyDog SDR.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[fdsdr@flydog-sdr-project ~]$ git clone https://github.com/flydog-sdr/docker-builder\n")])])]),r("p",[e._v("For mainland China, you can use the GitHub mirror (github.com.cnpmjs.org) to pull it.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[fdsdr@flydog-sdr-project ~]$ git clone https://github.com.cnpmjs.org/flydog-sdr/docker-builder\n")])])]),r("p",[e._v("Go to the "),r("code",[e._v("flydog-sdr")]),e._v(" directory and modify the relevant environment variables in the Dockerfile as appropriate.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[fdsdr@flydog-sdr-project ~]$ cd docker-builder/flydog-sdr\n[fdsdr@flydog-sdr-project flydog-sdr]$ vim Dockerfile\n")])])]),r("table",[r("thead",[r("tr",[r("th",{staticStyle:{"text-align":"left"}},[e._v("ENV")]),e._v(" "),r("th",{staticStyle:{"text-align":"left"}},[e._v("Description")])])]),e._v(" "),r("tbody",[r("tr",[r("td",{staticStyle:{"text-align":"left"}},[r("code",[e._v("GIT_URL")])]),e._v(" "),r("td",{staticStyle:{"text-align":"left"}},[e._v("Specify the GitHub hostname to speed up builds for mainland China")])]),e._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[r("code",[e._v("BRANCH")])]),e._v(" "),r("td",{staticStyle:{"text-align":"left"}},[e._v("Git branch")])]),e._v(" "),r("tr",[r("td",{staticStyle:{"text-align":"left"}},[r("code",[e._v("REPO")])]),e._v(" "),r("td",{staticStyle:{"text-align":"left"}},[e._v("Project name")])])])]),e._v(" "),r("p",[e._v("When you're done, start building the main application and it will take about 15 minutes to complete the build.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("[fdsdr@flydog-sdr-project flydog-sdr]$ docker build --no-cache -t flydog-sdr:latest .\n")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);
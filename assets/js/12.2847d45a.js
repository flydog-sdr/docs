(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{386:function(t,a,e){"use strict";e.r(a);var s=e(18),l=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"构建-raspbian-镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建-raspbian-镜像"}},[t._v("#")]),t._v(" 构建 Raspbian 镜像")]),t._v(" "),e("p",[t._v("FlyDog SDR 提供已经集成好了 FlyDog SDR 的 Raspbian 的镜像，同时用户亦可自行构建已集成 FlyDog SDR 的 Raspbian。")]),t._v(" "),e("h2",{attrs:{id:"搭建开发环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搭建开发环境"}},[t._v("#")]),t._v(" 搭建开发环境")]),t._v(" "),e("p",[t._v("要构建用于 FlyDog SDR 的 Raspbian 镜像，需要在 "),e("code",[t._v("armv7l")]),t._v(" 或 "),e("code",[t._v("x86_64")]),t._v(" 处理器架构的环境下进行操作。")]),t._v(" "),e("h3",{attrs:{id:"系统要求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#系统要求"}},[t._v("#")]),t._v(" 系统要求")]),t._v(" "),e("p",[t._v("构建集成 FlyDog SDR 的 Raspbian 前，需要满足以下要求。")]),t._v(" "),e("ul",[e("li",[t._v("用于构建的机器处理器架构为 "),e("code",[t._v("armv7l")]),t._v(" 或 "),e("code",[t._v("x86_64")])]),t._v(" "),e("li",[t._v("用于构建的机器使用的 Linux 发行版为 Debian Buster 或 Ubuntu Bionic")]),t._v(" "),e("li",[t._v("用于构建的机器没有运行在容器中（Docker）")]),t._v(" "),e("li",[t._v("用于构建的机器没有运行过 Docker，亦不会在今后运行 Docker")])]),t._v(" "),e("h3",{attrs:{id:"安装依赖项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖项"}},[t._v("#")]),t._v(" 安装依赖项")]),t._v(" "),e("p",[t._v("在执行构建任务前，需要安装用于构建 Raspbian 的依赖项。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("fdsdr@flydog-sdr-project:~$ apt-get update\nfdsdr@flydog-sdr-project:~$ apt-get -y install binfmt-support \\\n                   coreutils \\\n                   quilt \\\n                   parted \\\n                   qemu-user-static \\\n                   debootstrap \\\n                   zerofree \\\n                   zip \\\n                   dosfstools \\\n                   bsdtar \\\n                   libcap2-bin \\\n                   rsync \\\n                   xz-utils \\\n                   file \\\n                   git \\\n                   curl \\\n                   bc\nfdsdr@flydog-sdr-project:~$ apt-get autoremove --purge -y\n")])])]),e("h3",{attrs:{id:"获取构建代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取构建代码"}},[t._v("#")]),t._v(" 获取构建代码")]),t._v(" "),e("p",[t._v("从 GitHub 拉取构建集成 FlyDog SDR 的 Raspbian 的源码。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("fdsdr@flydog-sdr-project:~$ git clone https://github.com/flydog-sdr/raspbian-builder\n")])])]),e("p",[t._v("对于中国大陆，可以使用 GitHub 镜像（github.com.cnpmjs.org）进行拉取。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("fdsdr@flydog-sdr-project:~$ git clone https://github.com.cnpmjs.org/flydog-sdr/raspbian-builder\n")])])]),e("h3",{attrs:{id:"自定义配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自定义配置"}},[t._v("#")]),t._v(" 自定义配置")]),t._v(" "),e("p",[t._v("进入 "),e("code",[t._v("raspbian-builder")]),t._v(" 目录，修改 "),e("code",[t._v("config")]),t._v("。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("fdsdr@flydog-sdr-project:~$ cd raspbian-builder\nfdsdr@flydog-sdr-project:~/raspbian-builder$ vim config\n")])])]),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("变量")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("IMG_NAME")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("镜像名称")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("RELEASE")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Debian 版本代号")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("TARGET_HOSTNAME")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指定主机名")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("FIRST_USER_NAME")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指定用户名")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("FIRST_USER_PASS")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指定用户密码")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("ENABLE_SSH")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("启用 SSH")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("LOCALE_DEFAULT")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("默认 Locale")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("KEYBOARD_KEYMAP")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("默认键盘布局")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("TIMEZONE_DEFAULT")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("默认时区")])])])]),t._v(" "),e("h2",{attrs:{id:"执行构建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行构建"}},[t._v("#")]),t._v(" 执行构建")]),t._v(" "),e("p",[t._v("切换到 "),e("code",[t._v("root")]),t._v(" 用户，运行 "),e("code",[t._v("wizard.sh")]),t._v("。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("fdsdr@flydog-sdr-project:~/raspbian-builder$ ./wizard.sh\n")])])]),e("p",[t._v("镜像构建完毕后，可以在 "),e("code",[t._v("builder/deploy/")]),t._v(" 下找到生成的镜像。")])])}),[],!1,null,null,null);a.default=l.exports}}]);